(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{19:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(3),a=c(5),r=c(4),o="https://t-shirtback.herokuapp.com/api/",i=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},l=c(0),d=function(e,t){return e.location.pathname===t?{color:"#2ecc72"}:{color:"#FFFFFF"}},j=Object(a.g)((function(e){var t=e.history;return Object(l.jsx)("div",{children:Object(l.jsxs)("ul",{className:"nav nav-tabs bg-dark",children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(n.b,{style:d(t,"/"),className:"nav-link",to:"/",children:"Home"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(n.b,{style:d(t,"/cart"),className:"nav-link",to:"/cart",children:"Cart"})}),i()&&0===i().user.role&&Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(n.b,{style:d(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard",children:"Dashboard"})}),i()&&1===i().user.role&&Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(n.b,{style:d(t,"/admin/dashboard"),className:"nav-link",to:"/admin/dashboard",children:"A. Dashboard"})}),!i()&&Object(l.jsxs)(s.Fragment,{children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(n.b,{style:d(t,"/signup"),className:"nav-link",to:"/signup",children:"Signup"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(n.b,{style:d(t,"/signin"),className:"nav-link",to:"/signin",children:"Sign In"})})]}),i()&&Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)("span",{className:"nav-link text-warning",onClick:function(){!function(e){if("undefined"!==typeof window)localStorage.removeItem("jwt"),e(),fetch("".concat(o,"/signout"),{method:"GET"}).then((function(e){return console.log("signout success")})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))},children:"Signout"})})]})})})),b=function(e){var t=e.title,c=void 0===t?"My Title":t,s=e.description,n=void 0===s?"My desription":s,a=e.className,r=void 0===a?"bg-dark text-white p-4":a,o=e.children;return Object(l.jsxs)("div",{children:[Object(l.jsx)(j,{}),Object(l.jsxs)("div",{className:"container-fluid",children:[Object(l.jsxs)("div",{className:"jumbotron bg-dark text-white text-center",children:[Object(l.jsx)("h2",{className:"display-4",children:c}),Object(l.jsx)("p",{className:"lead",children:n})]}),Object(l.jsx)("div",{className:r,children:o})]}),Object(l.jsxs)("footer",{className:"footer bg-dark mt-auto py-3",children:[Object(l.jsxs)("div",{className:"container-fluid bg-success text-white text-center py-3",children:[Object(l.jsx)("h4",{children:"If you got any questions, feel free to reach out!"}),Object(l.jsx)("button",{className:"btn btn-warning btn-lg",children:"Contact Us"})]}),Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("span",{className:"text-muted",children:["An Amazing place to buy ",Object(l.jsx)("span",{className:"text-white",children:"T-shirt"})]})})]})]})},u=c(10),m=c(2),h=(c(13),c(19),function(e){var t=e.product,c=t?"".concat(o,"/product/photo/").concat(t._id):"https://images.pexels.com/photos/4530802/pexels-photo-4530802.jpeg?cs=srgb&dl=pexels-sorapong-chaipanya-4530802.jpg&fm=jpg";return Object(l.jsx)("div",{className:"rounded border border-success p-2",children:Object(l.jsx)("img",{src:c,alt:"product_photo",style:{maxHeight:"100%",maxWidth:"100%"},className:"mb-3 rounded"})})}),O=function(e){var t=e.product,c=e.addtoCart,n=void 0===c||c,o=e.removeFromCart,i=void 0!==o&&o,d=e.setReload,j=void 0===d?function(e){return e}:d,b=e.reload,u=void 0===b?void 0:b,O=Object(s.useState)(!1),p=Object(r.a)(O,2),x=p[0],f=p[1],g=Object(s.useState)(t.count),v=Object(r.a)(g,2),N=(v[0],v[1],t?t.name:"A photo from pexels"),y=t?t.description:"Default description",w=t?t.price:"DEFAULT",S=function(){!function(e,t){var c=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(m.a)(Object(m.a)({},e),{},{count:1})),localStorage.setItem("cart",JSON.stringify(c)),t())}(t,(function(){return f(!0)}))};return Object(l.jsxs)("div",{className:"card text-white bg-dark border border-info ",children:[Object(l.jsx)("div",{className:"card-header lead",children:N}),Object(l.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(l.jsx)(a.a,{to:"/cart"})}(x),Object(l.jsx)(h,{product:t}),Object(l.jsx)("p",{className:"lead bg-success font-weight-normal text-wrap",children:y}),Object(l.jsxs)("p",{className:"btn btn-success rounded  btn-sm px-4",children:["\u20b9 ",w]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-12",children:function(e){return e&&Object(l.jsx)("button",{onClick:S,className:"btn btn-block btn-outline-success mt-2 mb-2",children:"Add to Cart"})}(n)}),Object(l.jsx)("div",{className:"col-12",children:function(e){return e&&Object(l.jsx)("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,s){c._id===e&&t.splice(s,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),j(!u)},className:"btn btn-block btn-outline-danger mt-2 mb-2",children:"Remove from cart"})}(i)})]})]})]})};function p(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(!1),i=Object(r.a)(a,2),d=(i[0],i[1]),j=function(){fetch("".concat(o,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?d(e.error):n(e)}))};return Object(s.useEffect)((function(){j()}),[]),Object(l.jsx)(b,{title:"Home Page",description:"Welcome to the Tshirt Store",children:Object(l.jsxs)("div",{className:"row text-center",children:[Object(l.jsx)("h1",{className:"text-white",children:"All of tshirts"}),Object(l.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(l.jsx)("div",{className:"col-4 mb-4",children:Object(l.jsx)(O,{product:e})},t)}))})]})})}var x=i().user,f=(x.name,x.email,function(){var e=Object(s.useState)({email:"example@gmail.com",password:"example",error:"",loading:!1,didRedirect:!1}),t=Object(r.a)(e,2),c=t[0],n=t[1],d=c.email,j=c.password,h=c.error,O=c.loading,p=c.didRedirect,x=i().user,f=function(e){return function(t){n(Object(m.a)(Object(m.a)({},c),{},Object(u.a)({error:!1},e,t.target.value)))}},g=function(e){e.preventDefault(),n(Object(m.a)(Object(m.a)({},c),{},{error:!1,loading:!0})),function(e){return fetch("".concat(o,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:d,password:j}).then((function(e){e.error?n(Object(m.a)(Object(m.a)({},c),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){n(Object(m.a)(Object(m.a)({},c),{},{didRedirect:!0}))}))})).catch(console.log("Sign In request Failed"))};return Object(l.jsxs)(b,{title:"Sign In Page",description:"A page for user to sign In!",children:[O&&Object(l.jsx)("div",{className:"alert alert-info",children:Object(l.jsx)("h2",{children:"Loading..."})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(l.jsx)("div",{className:"alert alert-danger",style:{display:h?"":"none"},children:h})})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(l.jsxs)("form",{children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"text-light",children:"Email"}),Object(l.jsx)("input",{onChange:f("email"),value:d,className:"form-control",type:"email"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"text-light",children:"Password"}),Object(l.jsx)("input",{onChange:f("password"),value:j,className:"form-control",type:"password"})]}),Object(l.jsx)("div",{className:"text-center mt-4",children:Object(l.jsx)("button",{onClick:g,className:"btn btn-success btn-block rounded",children:"Submit"})})]})})}),p?x&&1===x.role?Object(l.jsx)(a.a,{to:"/admin/dashboard"}):Object(l.jsx)(a.a,{to:"/user/dashboard"}):i()?Object(l.jsx)(a.a,{to:"/"}):void 0,Object(l.jsx)("p",{className:"text-white text-center",children:JSON.stringify(c)})]})}),g=function(){var e=Object(s.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(r.a)(e,2),c=t[0],a=t[1],i=c.name,d=c.email,j=c.password,h=c.error,O=c.success,p=function(e){return function(t){a(Object(m.a)(Object(m.a)({},c),{},Object(u.a)({error:!1},e,t.target.value)))}},x=function(e){var t;e.preventDefault(),a(Object(m.a)(Object(m.a)({},c),{},{error:!1})),(t={name:i,email:d,password:j},fetch("".concat(o,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e&&e.error?a(Object(m.a)(Object(m.a)({},c),{},{error:e.error,success:!1})):a(Object(m.a)(Object(m.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))})).catch(console.log("Error in signup"))};return Object(l.jsxs)(b,{title:"Sign Up Page",description:"A page for user to sign Up!",children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(l.jsxs)("div",{className:"alert alert-success",style:{display:O?"":"none"},children:["New account created successfully. Please ",Object(l.jsx)(n.b,{to:"/signin",children:"Login Here"}),"."]})})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(l.jsx)("div",{className:"alert alert-danger",style:{display:h?"":"none"},children:h})})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(l.jsxs)("form",{children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"text-light",children:"Name"}),Object(l.jsx)("input",{className:"form-control",onChange:p("name"),type:"text",value:i})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"text-light",children:"Email"}),Object(l.jsx)("input",{className:"form-control",onChange:p("email"),type:"email",value:d})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"text-light",children:"Password"}),Object(l.jsx)("input",{className:"form-control",onChange:p("password"),type:"password",value:j})]}),Object(l.jsx)("div",{className:"text-center mt-4",children:Object(l.jsx)("button",{onClick:x,className:"btn btn-success btn-block rounded",children:"Submit"})})]})})}),Object(l.jsx)("p",{className:"text-white text-center",children:JSON.stringify(c)})]})},v=c(21),N=c.n(v),y=function(e){var t=e.products,c=e.setReload,a=void 0===c?function(e){return e}:c,d=e.reload,j=void 0===d?void 0:d,b=Object(s.useState)({loading:!1,success:!1,error:"",address:""}),u=Object(r.a)(b,2),m=(u[0],u[1],i()&&i().user._id),h=i()&&i().token,O=function(){var e=0;return t.map((function(t){e+=t.price})),e},p=function(e){var c={token:e,products:t};return fetch("".concat(o,"/stripepayment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(c){console.log(c);var s=c.status;console.log("STATUS",s);var n,r={products:t,transaction_id:c.id,amount:c.amount};console.log(e),function(e,t,c){fetch("".concat(o,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(m,h,r),n=function(){console.log("Crash?????")},void 0!==typeof window&&(localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify([])),n()),a(!j)})).catch((function(e){return console.log(e)}))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{className:"text-white",children:["Stripe checkout ",O()]}),i()?Object(l.jsx)(N.a,{stripeKey:"pk_test_51I09ktB1FUxfo3ec8uK5Udi6EI6IGslz6scLEfJ5jdFo1YIMK6zf6dWH1p7QzMRsF3vcbiENUAJ2GJlyzERdOPUz00dFHqtwlC",token:p,amount:100*O(),name:"Buy T-shirts",shippingAddress:!0,billingAddress:!0,currency:"INR",children:Object(l.jsx)("button",{className:"btn btn-success",children:"Pay with stripe"})}):Object(l.jsx)(n.b,{to:"/signin",children:Object(l.jsx)("button",{className:"btn btn-warning",children:"Signin"})})]})},w=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(!1),o=Object(r.a)(a,2),i=o[0],d=o[1];Object(s.useEffect)((function(){n(function(){if(void 0!==typeof window&&localStorage.getItem("cart"))return JSON.parse(localStorage.getItem("cart"))}())}),[i]);return Object(l.jsx)(b,{title:"Cart Page",description:"Ready to checkout",children:Object(l.jsxs)("div",{className:"row text-center",children:[Object(l.jsx)("div",{className:"col-6",children:c.length>0?function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"This section is to load products"}),e.map((function(e,t){return Object(l.jsx)(O,{product:e,removeFromCart:!0,addtoCart:!1,setReload:d,reload:i},t)}))]})}(c):Object(l.jsx)("h4",{children:"No products"})}),Object(l.jsx)("div",{className:"col-6",children:Object(l.jsx)(y,{products:c,setReload:d,reload:i})})]})})};function S(){return Object(l.jsx)(n.a,{children:Object(l.jsxs)(a.d,{children:[Object(l.jsx)(a.b,{exact:!0,path:"/",component:p}),Object(l.jsx)(a.b,{exact:!0,path:"/signup",component:g}),Object(l.jsx)(a.b,{exact:!0,path:"/signin",component:f}),Object(l.jsx)(a.b,{path:"/cart",exact:!0,component:w})]})})}var k=c(22);c.n(k).a.render(Object(l.jsx)(S,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.27f97100.chunk.js.map